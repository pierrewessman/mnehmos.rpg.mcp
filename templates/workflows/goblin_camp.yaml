# Goblin Camp Encounter
# Creates a combat encounter with positioned goblins and terrain

name: Goblin Camp
description: Sets up a goblin ambush encounter with terrain and positioned enemies.
version: "1.0.0"
author: Quest Keeper AI

parameters:
  encounterSeed:
    type: string
    description: Seed for reproducible encounter
    default: "goblin-ambush"
  goblinCount:
    type: number
    description: Number of regular goblins
    default: 4

steps:
  - name: create_goblin_boss
    tool: create_character
    params:
      name: "Goblin Boss"
      class: "Champion"
      race: "Goblin"
      hp: 21
      maxHp: 21
      ac: 17
      characterType: enemy
      stats:
        str: 14
        dex: 14
        con: 12
        int: 10
        wis: 10
        cha: 12
    storeAs: boss

  - name: create_goblins
    tool: batch_create_characters
    params:
      characters:
        - name: "Goblin Warrior 1"
          class: "Warrior"
          race: "Goblin"
          hp: 7
          ac: 15
          characterType: enemy
        - name: "Goblin Warrior 2"
          class: "Warrior"
          race: "Goblin"
          hp: 7
          ac: 15
          characterType: enemy
        - name: "Goblin Archer 1"
          class: "Archer"
          race: "Goblin"
          hp: 6
          ac: 13
          characterType: enemy
        - name: "Goblin Archer 2"
          class: "Archer"
          race: "Goblin"
          hp: 6
          ac: 13
          characterType: enemy
    storeAs: goblins

  - name: create_encounter
    tool: create_encounter
    dependsOn:
      - create_goblin_boss
      - create_goblins
    params:
      seed: "{{encounterSeed}}"
      participants:
        - id: "{{boss.id}}"
          name: "Goblin Boss"
          hp: 21
          maxHp: 21
          initiativeBonus: 2
          isEnemy: true
          position:
            x: 10
            y: 10
    storeAs: encounter

  - name: add_terrain
    tool: generate_terrain_pattern
    dependsOn:
      - create_encounter
    params:
      encounterId: "{{encounter.encounterId}}"
      pattern: canyon
      origin:
        x: 0
        y: 0
      width: 20
      height: 20

output:
  include:
    - create_encounter
  summary: "Created goblin camp encounter with boss and {{goblinCount}} warriors in canyon terrain"
